
var DEV_MODE = false;


$(function() {
	AutoUpdateView.init();
    AutoUpdateActivity.init();
  });


var view;

var AutoUpdateView = {

	view: {
		onOffLabel : $('#onOffLabel'),
		waiting : $('#waiting'),
		onOffButton : $('#onOffButton'),
		statusPanel : $('#statusPanel'),
		statusText : $('#statusText'),
	},

	init : function() {
		view = this.view;
		AutoUpdateView.bindUIActions();
	},

	bindUIActions : function() {
		view.onOffButton.change(AutoUpdateView.autoUpdateChanged);
	},

    autoUpdateChanged: function(event, detail, sender) {
        AutoUpdateActivity.toggle();
    },
    
    setEnabled : function(enabled, statusText) {
		view.onOffLabel.show();
		view.onOffButton.show();
        view.onOffButton.attr("checked", enabled);
        AutoUpdateView.showStatusPanel(true);
        AutoUpdateView.setStatusText(statusText);
        
        if (enabled) {
            AutoUpdateView.setOnOffLabel("YES");        
        } else {
		    AutoUpdateView.setOnOffLabel("NO");
        }
	},
    
    setOnOffLabel : function(text) {
        view.onOffLabel.text(text);
    }, 
    
    setStatusText : function(text) {
        view.statusText.text(text);
    },      
    
    showStatusPanel : function(show) {
       if (show) {
         view.statusPanel.show();
       } else {
         view.statusPanel.hide();
       }
    },    
    
	waiting : function(waiting) {

		if (waiting) {
       		view.waiting.show();
       		view.onOffLabel.hide();
		} else {
       		view.waiting.hide();
       		view.onOffLabel.show();
		}
	},

};


